#!/bin/sh
# Displays all HTTP request/response headers generated by a command

if [[ $# -lt 1 ]]; then
    echo "Usage: ./$0 <command>"
else
    (strace -s 2048 $@) 2>&1 | fgrep HTTP | sed -ne 's|.*"\(.*\)\\r\\n\\r\\n.*|\1|p' | sed -e 's/$/\n/' -e 's/\\r\\n/\n/g'
fi
